{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{Box,Button,Modal,TextField,Typography}from\"@mui/material\";import{useDispatch}from\"react-redux\";import{fetchPostDetails}from\"../store/slices/postSlice\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Post=_ref=>{let{post}=_ref;const[showModal,setShowModal]=useState(false);const[errorMessage,setErrorMessage]=useState(\"\");const[password,setPassword]=useState(\"\");const navigate=useNavigate();const dispatch=useDispatch();// 모달 스타일\nconst modalStyle={position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",width:400,bgcolor:\"background.paper\",borderRadius:2,boxShadow:24,p:4};// 게시글 클릭 시 모달 창 표시\nconst handleClick=()=>{setShowModal(true);};const handlePasswordChange=e=>{setPassword(e.target.value);};// 비밀번호 제출\nconst handleSubmit=async()=>{setErrorMessage(\"\");//오류메시지 초기화\ntry{// await ApiService.fetchPostDetails(post.id, password);\n// // 비밀번호가 맞으면 게시글 상세 페이지로 이동\n// navigate(`/post/${post.id}`, {\n//   state: { password },\n// });\nconst resultAction=await dispatch(fetchPostDetails({postId:post.id,password}));if(fetchPostDetails.fulfilled.match(resultAction)){navigate(`/post/${post.id}`,{state:{password}});}else{setErrorMessage(\"비밀번호가 잘못되었습니다. 다시 시도해주세요.\");}}catch(error){console.error(\"Error fetching post details: \",error);setErrorMessage(\"오류가 발생했습니다. 다시 시도해주세요.\");}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",onClick:handleClick,children:[post.title,\" | \\uC791\\uC131\\uC790: \",post.user_name,\" | \\uC791\\uC131\\uC77C:\",\" \",new Date(post.posted_at).toLocaleDateString()]}),/*#__PURE__*/_jsx(Modal,{open:showModal,onClose:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(Box,{sx:modalStyle,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(TextField,{type:\"password\",label:\"\\uBE44\\uBC00\\uBC88\\uD638\",fullWidth:true,value:password,onChange:handlePasswordChange,error:!!errorMessage,helperText:errorMessage}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2,display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleSubmit,children:\"\\uD655\\uC778\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>setShowModal(false),children:\"\\uCDE8\\uC18C\"})]})]})})]});};export default Post;","map":{"version":3,"names":["React","useState","useNavigate","Box","Button","Modal","TextField","Typography","useDispatch","fetchPostDetails","jsxs","_jsxs","jsx","_jsx","Post","_ref","post","showModal","setShowModal","errorMessage","setErrorMessage","password","setPassword","navigate","dispatch","modalStyle","position","top","left","transform","width","bgcolor","borderRadius","boxShadow","p","handleClick","handlePasswordChange","e","target","value","handleSubmit","resultAction","postId","id","fulfilled","match","state","error","console","children","variant","onClick","title","user_name","Date","posted_at","toLocaleDateString","open","onClose","sx","gutterBottom","type","label","fullWidth","onChange","helperText","mt","display","justifyContent","color"],"sources":["C:/workspace/github_test/react-myboard-app/src/components/Post.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Box, Button, Modal, TextField, Typography } from \"@mui/material\";\nimport { useDispatch } from \"react-redux\";\nimport { fetchPostDetails } from \"../store/slices/postSlice\";\n\nconst Post = ({ post }) => {\n  const [showModal, setShowModal] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  // 모달 스타일\n  const modalStyle = {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    width: 400,\n    bgcolor: \"background.paper\",\n    borderRadius: 2,\n    boxShadow: 24,\n    p: 4,\n  };\n\n  // 게시글 클릭 시 모달 창 표시\n  const handleClick = () => {\n    setShowModal(true);\n  };\n\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n\n  // 비밀번호 제출\n  const handleSubmit = async () => {\n    setErrorMessage(\"\"); //오류메시지 초기화\n    try {\n      // await ApiService.fetchPostDetails(post.id, password);\n      // // 비밀번호가 맞으면 게시글 상세 페이지로 이동\n      // navigate(`/post/${post.id}`, {\n      //   state: { password },\n      // });\n      const resultAction = await dispatch(\n        fetchPostDetails({ postId: post.id, password })\n      );\n      if (fetchPostDetails.fulfilled.match(resultAction)) {\n        navigate(`/post/${post.id}`, { state: { password } });\n      } else {\n        setErrorMessage(\"비밀번호가 잘못되었습니다. 다시 시도해주세요.\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching post details: \", error);\n      setErrorMessage(\"오류가 발생했습니다. 다시 시도해주세요.\");\n    }\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"body2\" onClick={handleClick}>\n        {post.title} | 작성자: {post.user_name} | 작성일:{\" \"}\n        {new Date(post.posted_at).toLocaleDateString()}\n      </Typography>\n\n      <Modal open={showModal} onClose={() => setShowModal(false)}>\n        <Box sx={modalStyle}>\n          <Typography variant=\"h6\" gutterBottom>\n            비밀번호를 입력하세요\n          </Typography>\n          <TextField\n            type=\"password\"\n            label=\"비밀번호\"\n            fullWidth\n            value={password}\n            onChange={handlePasswordChange}\n            error={!!errorMessage}\n            helperText={errorMessage}\n          />\n          <Box sx={{ mt: 2, display: \"flex\", justifyContent: \"space-between\" }}>\n            <Button variant=\"contained\" color=\"primary\" onClick={handleSubmit}>\n              확인\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => setShowModal(false)}\n            >\n              취소\n            </Button>\n          </Box>\n        </Box>\n      </Modal>\n    </Box>\n  );\n};\n\nexport default Post;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}